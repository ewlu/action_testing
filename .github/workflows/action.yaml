name: Test

on:
  push

jobs:
  build-issue:
    runs-on: ubuntu-20.04
    permissions:
      issues: write
    steps:
      - uses: actions/checkout@v3

      - name: install dependencies
        run: |
          sudo apt install qemu-user-static
          sudo apt install binfmt-support
          sudo sed -i 's|interpreter .*|interpreter /usr/bin/qemu-riscv64-static|' /usr/share/binfmts/qemu-riscv64
          sudo update-binfmts --importdir /usr/share/binfmts --import qemu-riscv64
          cat /proc/sys/fs/binfmt_misc/qemu-riscv64
          
    
  # run-matrix: 
  #   # needs: [ build-issue ]
  #   uses: ./.github/workflows/matrix.yaml
  #   # strategy:
  #   #   fail-fast: false
  #   #   matrix: 
  #   #     target:
  #   #       ${{ fromJson(needs.build-issue.outputs.list) }}
  #   with:
  #     target: hi
          
